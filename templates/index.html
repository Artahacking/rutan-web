{% extends "layout.html" %}
{% block content %}

<style>
    /* PERBAIKAN UTAMA ADA DI SINI */

    /* 1. Hapus tinggi paksa pada container carousel */
    .carousel-item {
        width: 100%;
        height: auto; /* Biarkan tinggi menyesuaikan isi gambar */
        min-height: auto;
    }

    /* 2. Ubah perilaku gambar */
    .slider-img {
        width: 100%;       /* Lebar mentok layar */
        height: auto;      /* Tinggi otomatis mengikuti proporsi aslinya */
        display: block;
        /* HAPUS object-fit: cover agar tidak dipotong/crop */
    }

    /* Hapus media query yang memaksa tinggi di HP, biarkan natural */
    
    /* Styling tambahan lainnya tetap sama */
    .hover-up { transition: transform 0.3s ease; cursor: default; }
    .hover-up:hover { transform: translateY(-10px); }
    .hover-shadow:hover { box-shadow: 0 1rem 3rem rgba(0,0,0,.1)!important; }
    .zoom-effect:hover { transform: scale(1.1); transition: transform 0.5s ease; }
    .transition-all { transition: all 0.3s ease; }
    .letter-spacing-2 { letter-spacing: 2px; }
    .ls-1 { letter-spacing: 1px; }
    .text-truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .backdrop-blur { backdrop-filter: blur(5px); }
</style>

<div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        {% for slider in sliders %}
        <div class="carousel-item {% if loop.first %}active{% endif %}">
            <a href="{{ slider.link }}">
                <img src="{{ url_for('static', filename='uploads/' + slider.image) }}" 
                     class="d-block slider-img" 
                     alt="Slider Image">
            </a>
        </div>
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" style="filter: invert(1);"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" style="filter: invert(1);"></span>
    </button>
</div>

<section class="py-5 bg-light">
    <div class="container text-center">
        <h2 class="fw-bold text-primary mb-5" style="letter-spacing: 2px;">TATA NILAI KAMI PASTI</h2>
        <div class="row justify-content-center g-4">
            <div class="col-lg-2 col-4">
                <div class="card h-100 border-0 shadow-sm py-4 hover-up rounded-4">
                    <div class="card-body">
                        <i class="fas fa-user-tie fa-3x text-primary mb-3"></i>
                        <h6 class="fw-bold text-dark mt-2">Profesional</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-4">
                <div class="card h-100 border-0 shadow-sm py-4 hover-up rounded-4">
                    <div class="card-body">
                        <i class="fas fa-hand-holding-usd fa-3x text-primary mb-3"></i>
                        <h6 class="fw-bold text-dark mt-2">Akuntabel</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-4">
                <div class="card h-100 border-0 shadow-sm py-4 hover-up rounded-4">
                    <div class="card-body">
                        <i class="fas fa-handshake fa-3x text-primary mb-3"></i>
                        <h6 class="fw-bold text-dark mt-2">Sinergi</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-4">
                <div class="card h-100 border-0 shadow-sm py-4 hover-up rounded-4">
                    <div class="card-body">
                        <i class="fas fa-eye fa-3x text-primary mb-3"></i>
                        <h6 class="fw-bold text-dark mt-2">Transparan</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-4">
                <div class="card h-100 border-0 shadow-sm py-4 hover-up rounded-4">
                    <div class="card-body">
                        <i class="fas fa-lightbulb fa-3x text-primary mb-3"></i>
                        <h6 class="fw-bold text-dark mt-2">Inovatif</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-white">
    <div class="container">
        <div class="row align-items-center gy-5">
            
            <div class="col-lg-7 order-2 order-lg-1">
                <h5 class="text-primary fw-bold mb-1 ls-1">KEPALA RUTAN KELAS IIB PANGKALAN BRANDAN</h5>
                <h2 class="text-uppercase fw-bolder mb-4 text-dark display-5">AKMALUN IKHSAN</h2>

                <div class="lead-text text-secondary" style="line-height: 1.9; font-size: 1.05rem; text-align: justify;">
                    <p class="fw-bold mb-3 text-primary"><em>Assalamualaikum Wr. Wb.</em></p>
                    
                    <p>Puji syukur kami panjatkan kehadirat ALLAH SWT atas limpahan rahmat dan karunia-Nya. Website ini hadir sebagai wujud komitmen kami dalam memberikan keterbukaan informasi publik yang transparan dan akuntabel kepada masyarakat serta stakeholder terkait.</p>
                    
                    <p>Kami berharap website ini dapat menjadi jembatan informasi dan komunikasi yang efektif, khususnya dalam memberikan pelayanan pemasyarakatan yang PRIMA.</p>
                    
                    <p class="mt-4 mb-0 fw-semibold text-dark">Selamat bekerja, Salam Pemasyarakatan!</p>
                    
                    <div class="mt-4 border-start border-4 border-warning ps-3">
                        <small class="text-muted d-block fw-bold">Wassalamu'alaikum Wr. Wb.</small>
                        <span class="text-primary fw-bold">Kepala Rutan Kelas IIB Pangkalan Brandan</span>
                    </div>
                </div>
            </div>

            <div class="col-lg-5 order-1 order-lg-2">
                <div class="card border-0 shadow-lg rounded-4 overflow-hidden mx-auto" style="max-width: 450px;"> 
                    <div class="bg-primary pt-4 px-4 text-center position-relative" style="background: linear-gradient(135deg, #003366 0%, #0056b3 100%); height: 480px; display: flex; align-items: flex-end; justify-content: center;">
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://www.transparenttextures.com/patterns/cubes.png'); opacity: 0.1;"></div>
                        
                        <img src="{{ url_for('static', filename='karutan.png') }}" 
                             class="img-fluid position-relative z-2" 
                             alt="Akmalun Ihsan" 
                             style="max-height: 460px; object-fit: contain; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3));">
                    </div>
                    
                    <div class="card-body text-center bg-white py-4 position-relative">
                        <div style="position: absolute; top: -20px; left: 0; width: 100%; height: 20px; background-color: white; border-top-left-radius: 50% 100%; border-top-right-radius: 50% 100%;"></div>
                        <h4 class="fw-bolder text-dark text-uppercase mb-1">AKMALUN IKHSAN</h4>
                        <p class="text-primary fw-bold mb-0 small ls-1">KEPALA RUTAN PANGKALAN BRANDAN</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<section class="text-white position-relative overflow-hidden" style="background: linear-gradient(135deg, #002244 0%, #004080 100%);">
    <div class="position-absolute top-0 start-0 w-100 h-100" style="opacity: 0.1; background-image: url('{{ url_for('static', filename='pattern.png') }}');"></div>
    
    <div class="container py-5 text-center position-relative z-1">
        <h5 class="mb-2 text-warning fw-bold letter-spacing-2">DATA WBP SAAT INI</h5>
        <h2 class="mb-5 fw-bold">RUTAN KELAS IIB PANGKALAN BRANDAN</h2>
        
        <div class="row justify-content-center">
            <div class="col-md-4">
                <div class="p-4 border border-white border-opacity-25 rounded-3 bg-white bg-opacity-10 backdrop-blur">
                    <div class="display-1 fw-bold mb-2 text-warning">{{ wbp_count }}</div>
                    <p class="fs-5 mb-0">Warga Binaan Pemasyarakatan</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h3 class="fw-bold text-primary text-uppercase border-bottom border-warning border-3 d-inline-block pb-2">Visi & Misi</h3>
        </div>
        
        <div class="row g-4">
            <div class="col-md-12">
                <div class="card border-0 shadow-sm h-100 hover-shadow transition-all">
                    <div class="card-body p-4 border-start border-5 border-primary bg-white rounded">
                        <div class="d-flex align-items-start">
                            <div class="bg-primary text-white rounded-circle p-3 me-3 flex-shrink-0">
                                <i class="fas fa-star fa-lg"></i>
                            </div>
                            <div>
                                <h4 class="fw-bold text-primary mb-2">VISI</h4>
                                <p class="mb-0 fs-5 text-dark">"Terwujudnya Penegakan Hukum dan Pelayanan Keimigrasian dan Pemasyarakatan untuk Stabilitas Keamanan yang Tangguh menuju Indonesia Emas 2045"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="card border-0 shadow-sm h-100 hover-shadow transition-all">
                    <div class="card-body p-4 border-start border-5 border-success bg-white rounded">
                        <div class="d-flex align-items-start">
                            <div class="bg-success text-white rounded-circle p-3 me-3 flex-shrink-0">
                                <i class="fas fa-list-check fa-lg"></i>
                            </div>
                            <div>
                                <h4 class="fw-bold text-success mb-2">MISI</h4>
                                <ul class="list-unstyled mb-0 fs-6 text-secondary">
                                    <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Menciptakan sistem keimigrasian dan pemasyarakatan yang modern.</li>
                                    <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Terintegrasi dan akuntabel melalui peningkatan kompetensi.</li>
                                    <li><i class="fas fa-check-circle text-success me-2"></i> Profesionalisme sumber daya manusia yang berintegritas.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-12">
                <div class="card border-0 shadow-sm h-100 hover-shadow transition-all">
                    <div class="card-body p-4 border-start border-5 border-info bg-white rounded">
                        <h4 class="fw-bold text-info mb-3"><i class="fas fa-gavel me-2"></i> TATA NILAI PASTI</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><strong>1. Profesional:</strong> Bekerja sesuai dengan keahlian dan kompetensi.</li>
                                    <li class="mb-2"><strong>2. Akuntabel:</strong> Dapat dipertanggungjawabkan sesuai peraturan.</li>
                                    <li class="mb-2"><strong>3. Sinergi:</strong> Membangun hubungan kerja sama yang produktif.</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-unstyled mb-0">
                                    <li class="mb-2"><strong>4. Transparan:</strong> Keterbukaan dalam memberikan informasi.</li>
                                    <li class="mb-2"><strong>5. Inovatif:</strong> Selalu melakukan terobosan untuk pelayanan lebih baik.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container my-5 py-4">
    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
        <h3 class="text-primary m-0"><i class="fas fa-newspaper me-2"></i> Berita Terkini</h3>
        <a href="{{ url_for('berita') }}" class="btn btn-outline-primary rounded-pill px-4">Lihat Semua <i class="fas fa-arrow-right ms-1"></i></a>
    </div>
    
    <div class="row">
        {% for item in news %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm border-0 hover-shadow transition-all rounded-3 overflow-hidden">
                {% if item.image %}
                <div class="position-relative overflow-hidden" style="height: 220px;">
                    <img src="{{ url_for('static', filename='uploads/' + item.image) }}" class="card-img-top zoom-effect w-100 h-100" alt="news" style="object-fit: cover;">
                    <div class="position-absolute bottom-0 start-0 bg-primary text-white px-3 py-1 m-2 rounded small shadow">
                        <i class="far fa-calendar-alt me-1"></i> {{ item.created_at }}
                    </div>
                </div>
                {% endif %}
                <div class="card-body d-flex flex-column p-4">
                    <h5 class="card-title fw-bold text-dark mb-3 lh-sm text-truncate-2">{{ item.title }}</h5>
                    <p class="card-text text-secondary flex-grow-1 small">
                        {{ item.content | striptags | truncate(100) }}
                    </p>
                    <a href="{{ url_for('detail_berita', id=item.id) }}" class="btn btn-link text-decoration-none p-0 fw-bold mt-3 text-start">
                        BACA SELENGKAPNYA <i class="fas fa-long-arrow-alt-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center text-muted py-5 bg-light rounded-3">
            <i class="far fa-newspaper fa-3x mb-3 text-secondary"></i>
            <p>Belum ada berita terbaru saat ini.</p>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
